{% extends "base.html" %}

{% block content %}
<html lang="pt-br">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Relatório de Vendas</title>
</head>
<body>
   <h1>Relatório de Vendas</h1>

   <form method="post">
       <label for="product_id">Selecione o Produto:</label>
       <select name="product_id" id="product_id">
           {% for product in products %}
               <option value="{{ product[0] }}">{{ product[1] }}</option>
           {% endfor %}
       </select>
       <button type="submit">Gerar Relatório</button>
   </form>

   {% with messages = get_flashed_messages() %}
     {% if messages %}
       <ul>
         {% for message in messages %}
           <li>{{ message }}</li>
         {% endfor %}
       </ul>
     {% endif %}
   {% endwith %}

   {% if graph %}
       <div>{{ graph|safe }}</div>
   {% else %}
       <p>Selecione um produto e clique em "Gerar Relatório" para ver o gráfico.</p>
   {% endif %}
</body>
</html>
{% endblock %}